<!DOCTYPE html><html lang="zh-TW"><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="æ—¥æœ¬åŒ…è£æ©Ÿç¶­ä¿®å›å ±å–® - å¿«é€Ÿå ±å‘Šå’Œå®‰æ’ç¶­ä¿®æœå‹™">
    <meta name="author" content="Leo">
    <title>æ—¥æœ¬åŒ…è£æ©Ÿç¶­ä¿®å›å ±å–®</title>
    <!-- Web App åŠŸèƒ½æ”¯æ´ -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="ç¶­ä¿®å›å ±å–®">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ› ï¸</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ› ï¸</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        mainbg: '#F6F5F3',
                        maintext: '#424242',
                        buttonbg: '#EDEEF0',
                        titlebg: '#909FA6',
                        bordergray: '#424242'
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            --main-bg: #F6F5F3;
            --main-text: #424242;
            --button-bg: #EDEEF0;
            --title-bg: #909FA6;
            --border-gray: #424242;
        }

        body {
            background-color: var(--main-bg);
            color: var(--main-text);
        }
        
        input, textarea {
            color: var(--main-text);
            background-color: white;
        }
        
        button {
            background-color: var(--button-bg) !important;
            color: var(--main-text) !important;
            border: 1px solid var(--border-gray) !important;
            transition: all 0.2s ease-in-out;
        }
        
        button:hover {
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            transform: translateY(-1px);
            opacity: 0.9;
        }

        .underlined-option {
            text-decoration: underline;
            cursor: pointer;
            color: #424242 !important;
            margin-right: 10px;
            display: inline-block;
            margin-bottom: 8px;
        }
        
        .underlined-option:active, .underlined-option:hover, .underlined-option:visited {
            color: #424242 !important;
        }

        /* æ·±è‰²æ¨¡å¼æ”¯æ´ */
        @media (prefers-color-scheme: dark) {
            :root {
                --main-bg: #2C3333;
                --main-text: #E3E8EB;
                --button-bg: #3E4545;
                --title-bg: #667780;
            }
            
            input, textarea {
                color: #333333; 
                background-color: #FFFFFF;
            }
            
            .shadow-md {
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3) !important;
            }
        }
        
        /* å®‰è£æˆåŠŸé€šçŸ¥ */
        #installSuccess {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            z-index: 1000;
            display: none;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            text-align: center;
            max-width: 300px;
        }
        
        /* éš±è—PWAç›¸é—œæŒ‰éˆ• */
        @media all and (display-mode: standalone) {
            #addToHomeBtn {
                display: none;
            }
        }
    </style>
</head>
<body class="bg-mainbg min-h-screen">
    <!-- å®‰è£æˆåŠŸé€šçŸ¥ -->
    <div id="installSuccess">
        <p><i class="fas fa-check-circle mr-2"></i>å·²æˆåŠŸæ·»åŠ åˆ°ä¸»å±å¹•!</p>
    </div>
    
    <div class="container mx-auto px-4 py-8 max-w-3xl">
        <!-- æ¨™é¡Œå€ -->
        <div class="bg-titlebg text-white text-center p-4 rounded-t-lg shadow-md border border-bordergray">
            <h1 class="text-2xl font-bold">æ—¥æœ¬åŒ…è£æ©Ÿç¶­ä¿®å›å ±å–®</h1>
        </div>
        
        <!-- ä¸»è¦å…§å®¹å€ -->
        <div class="bg-mainbg p-6 rounded-b-lg shadow-md mb-6 border border-t-0 border-bordergray">
            <!-- å•ç­”å€åŸŸ -->
            <div id="questionArea" class="mb-6">
                <div id="question1" class="question-container">
                    <h2 class="text-xl font-semibold text-maintext mb-4">1. æœ‰æ²’æœ‰Error Code</h2>
                    <div class="flex flex-wrap gap-4">
                        <button id="btnErrorCode" class="px-4 py-2 bg-buttonbg rounded-md">
                            æœ‰ Error Code
                        </button>
                        <button id="btnNoErrorCode" class="px-4 py-2 bg-buttonbg rounded-md">
                            æ²’æœ‰ Error Code
                        </button>
                    </div>
                </div>

                <div id="errorCodeSelection" class="hidden mt-6">
                    <h2 class="text-xl font-semibold text-maintext mb-4">1. è«‹é¸æ“‡ Error Code</h2>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                        <button class="error-code-btn px-3 py-2 bg-buttonbg border border-bordergray rounded" data-code="E30">E30</button>
                        <button class="error-code-btn px-3 py-2 bg-buttonbg border border-bordergray rounded" data-code="E22">E22</button>
                        <button class="error-code-btn px-3 py-2 bg-buttonbg border border-bordergray rounded" data-code="E23">E23</button>
                        <button class="error-code-btn px-3 py-2 bg-buttonbg border border-bordergray rounded" data-code="E20">E20</button>
                        <button class="error-code-btn px-3 py-2 bg-buttonbg border border-bordergray rounded" data-code="E21">E21</button>
                        <button class="error-code-btn px-3 py-2 bg-buttonbg border border-bordergray rounded" data-code="E24">E24</button>
                        <button class="error-code-btn px-3 py-2 bg-buttonbg border border-bordergray rounded" data-code="E25">E25</button>
                        <button class="error-code-btn px-3 py-2 bg-buttonbg border border-bordergray rounded" data-code="E26">E26</button>
                        <button class="error-code-btn px-3 py-2 bg-buttonbg border border-bordergray rounded" data-code="E27">E27</button>
                        <button class="error-code-btn px-3 py-2 bg-buttonbg border border-bordergray rounded" data-code="E31">E31</button>
                        <button class="error-code-btn px-3 py-2 bg-buttonbg border border-bordergray rounded" data-code="PE">PE</button>
                        <button class="error-code-btn px-3 py-2 bg-buttonbg border border-bordergray rounded" data-code="E00">E00</button>
                        <button class="error-code-btn px-3 py-2 bg-buttonbg border border-bordergray rounded" data-code="E01">E01</button>
                        <button class="error-code-btn px-3 py-2 bg-buttonbg border border-bordergray rounded" data-code="E18">E18</button>
                        <button class="error-code-btn px-3 py-2 bg-buttonbg border border-bordergray rounded" data-code="E28">E28</button>
                    </div>
                    <div class="mt-4 flex justify-between">
                        <button id="btnBackToQuestion1" class="px-3 py-1 bg-buttonbg rounded-md text-sm">
                            <i class="fas fa-arrow-left mr-1"></i> è¿”å›
                        </button>
                    </div>
                </div>

                <div id="errorCodeDetails" class="hidden mt-6 p-4 bg-mainbg rounded-lg border border-bordergray">
                    <h3 id="selectedErrorCodeTitle" class="text-lg font-semibold text-maintext mb-2"></h3>
                    <p id="errorCodeDescription" class="text-maintext mb-4 whitespace-pre-line"></p>
                    <div class="flex justify-between">
                        <button id="btnBackToErrorSelection" class="px-3 py-1 bg-buttonbg rounded-md text-sm">
                            <i class="fas fa-arrow-left mr-1"></i> è¿”å›
                        </button>
                        <button id="btnScheduleRepair" class="px-4 py-2 bg-buttonbg rounded-md">
                            å®‰æ’ç¶­ä¿®
                        </button>
                    </div>
                </div>

                <div id="noErrorCodeOptions" class="hidden mt-6">
                    <h2 class="text-xl font-semibold text-maintext mb-3">1. è«‹æä¾›è³‡è¨Š</h2>
                    <div class="mb-4">
                        <textarea id="noErrorDetails" class="w-full p-3 border border-bordergray rounded-md focus:ring focus:outline-none text-base bg-white text-maintext" rows="3" placeholder="è«‹æè¿°å•é¡Œ..."></textarea>
                    </div>
                    <div class="mb-4">
                        <p class="text-maintext mb-2">å¸¸è¦‹å•é¡Œï¼š</p>
                        <div class="flex flex-wrap">
                            <span class="underlined-option" data-detail="å¸å¡µæ‘©æ‰“å®Œå…¨ / éƒ¨ä»½ç„¡åæ‡‰">å¸å¡µæ‘©æ‰“å®Œå…¨ / éƒ¨ä»½ç„¡åæ‡‰</span>
                            <span class="underlined-option" data-detail="å¸å¡µå–‰ç„¡å¸åŠ›æˆ–å¸åŠ›æ¸›å¼±">å¸å¡µå–‰ç„¡å¸åŠ›æˆ–å¸åŠ›æ¸›å¼±</span>
                            <span class="underlined-option" data-detail="åŒ…è£ç´™å¤¾ç²‰">åŒ…è£ç´™å¤¾ç²‰</span>
                            <span class="underlined-option" data-detail="åŒ…è£ç´™å°å£ç•°å¸¸">åŒ…è£ç´™å°å£ç•°å¸¸</span>
                            <span class="underlined-option" data-detail="æ²’æœ‰é›»æº">æ²’æœ‰é›»æº</span>
                            <span class="underlined-option" data-detail="æœ‰ç•°å¸¸è²éŸ³">æœ‰ç•°å¸¸è²éŸ³</span>
                            <span class="underlined-option" data-detail="é›¶ä»¶ç ´æ">é›¶ä»¶ç ´æ</span>
                            <span class="underlined-option" data-detail="å…¶ä»–å•é¡Œ">å…¶ä»–å•é¡Œ</span>
                        </div>
                    </div>
                    <div class="flex justify-between">
                        <button id="btnBackToQuestion1FromNoError" class="px-3 py-1 bg-buttonbg rounded-md text-sm">
                            <i class="fas fa-arrow-left mr-1"></i> è¿”å›
                        </button>
                        <button id="btnNoErrorScheduleRepair" class="px-4 py-2 bg-buttonbg rounded-md">
                            å®‰æ’ç¶­ä¿®
                        </button>
                    </div>
                </div>

                <div id="question2" class="hidden mt-6">
                    <h2 class="text-xl font-semibold text-maintext mb-4">2. Error Code å‡ºç¾çš„å¯†åº¦</h2>
                    <div class="flex flex-wrap gap-3 mb-4">
                        <button class="error-density-btn px-4 py-2 bg-buttonbg rounded-md border border-bordergray" data-density="é‹ä½œæ™‚å¿…å®šç™¼ç”Ÿ">é‹ä½œæ™‚å¿…å®šç™¼ç”Ÿ</button>
                        <button class="error-density-btn px-4 py-2 bg-buttonbg rounded-md border border-bordergray" data-density="æ¯æ—¥ä¸€æ¬¡æˆ–ä»¥ä¸Š">æ¯æ—¥ä¸€æ¬¡æˆ–ä»¥ä¸Š</button>
                        <button class="error-density-btn px-4 py-2 bg-buttonbg rounded-md border border-bordergray" data-density="æ¯æ—¥1æ¬¡æˆ–ä»¥ä¸‹">æ¯æ—¥1æ¬¡æˆ–ä»¥ä¸‹</button>
                    </div>
                    <div class="flex justify-start">
                        <button id="btnBackToErrorDetails" class="px-3 py-1 bg-buttonbg rounded-md text-sm">
                            <i class="fas fa-arrow-left mr-1"></i> è¿”å›
                        </button>
                    </div>
                </div>

                <div id="question3" class="hidden mt-6">
                    <h2 class="text-xl font-semibold text-maintext mb-4">3. æ©Ÿèº«ç·¨è™Ÿ</h2>
                    <p class="text-maintext mb-2">åœ¨æ©Ÿèº«ä¸­é–“é«˜åº¦ï¼Œå·¦å´éŠ€è‰²è²¼ç´™ï¼Œç”¢å“ç·¨è™ŸAxxxxx</p>
                    <input type="text" id="machineNumber" placeholder="è«‹è¼¸å…¥æ©Ÿèº«ç·¨è™Ÿ" class="w-full p-3 border border-bordergray rounded-md focus:ring focus:outline-none text-base bg-white text-maintext">
                    <div class="mt-3 flex justify-between">
                        <button id="btnBackToPreviousQ" class="px-3 py-1 bg-buttonbg rounded-md text-sm">
                            <i class="fas fa-arrow-left mr-1"></i> è¿”å›
                        </button>
                        <button id="btnContinue3" class="px-4 py-2 bg-buttonbg rounded-md border border-bordergray">
                            ç¹¼çºŒ
                        </button>
                    </div>
                </div>

                <div id="question4" class="hidden mt-6">
                    <h2 class="text-xl font-semibold text-maintext mb-4">4. å®¢æˆ¶ç·¨è™Ÿæˆ–è¨ºæ‰€åç¨±</h2>
                    <input type="text" id="customerInfo" placeholder="è«‹è¼¸å…¥å®¢æˆ¶ç·¨è™Ÿæˆ–è¨ºæ‰€åç¨±" class="w-full p-3 border border-bordergray rounded-md focus:ring focus:outline-none text-base bg-white text-maintext">
                    <div class="mt-3 flex justify-between">
                        <button id="btnBackToQuestion3" class="px-3 py-1 bg-buttonbg rounded-md text-sm">
                            <i class="fas fa-arrow-left mr-1"></i> è¿”å›
                        </button>
                        <button id="btnContinue4" class="px-4 py-2 bg-buttonbg rounded-md border border-bordergray">
                            ç¹¼çºŒ
                        </button>
                    </div>
                </div>

                <div id="question5" class="hidden mt-6">
                    <h2 class="text-xl font-semibold text-maintext mb-4">5. è«‹é¸æ“‡æ“ä½œ</h2>
                    <div class="flex flex-wrap gap-4 mb-4">
                        <button id="btnSendWhatsApp" class="flex items-center px-4 py-2 bg-green-500 text-white rounded-md border border-bordergray hover:bg-green-600">
                            <i class="fab fa-whatsapp mr-2 text-xl"></i> ç™¼é€çµ¦ Leo (WhatsApp)
                        </button>
                        <button id="btnCopyOnly" class="px-4 py-2 bg-buttonbg rounded-md border border-bordergray">
                            <i class="far fa-copy mr-2"></i> åªè¤‡è£½è³‡æ–™
                        </button>
                    </div>
                    <div class="flex justify-start">
                        <button id="btnBackToQuestion4" class="px-3 py-1 bg-buttonbg rounded-md text-sm">
                            <i class="fas fa-arrow-left mr-1"></i> è¿”å›
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- è¡¨å–®çµæœå€ -->
            <div id="formResult" class="mt-8 p-4 border border-bordergray rounded-lg bg-mainbg">
                <h3 class="text-lg font-semibold text-maintext mb-3">å›å ±å–®è³‡è¨Š</h3>
                <div class="space-y-2 text-maintext">
                    <p id="resultErrorCode">Error Codeï¼š</p>
                    <p id="resultErrorDensity">Error Codeå¯†åº¦ï¼š</p>
                    <p id="resultMachineNumber">æ©Ÿèº«ç·¨è™Ÿï¼š</p>
                    <p id="resultCustomerInfo">å®¢æˆ¶ç·¨è™Ÿ/è¨ºæ‰€åç¨±ï¼š</p>
                    <p id="resultDetails">å…¶ä»–ç´°ç¯€ï¼š</p>
                </div>
            </div>
        </div>
        
        <!-- ç‰ˆæ¬Šè³‡è¨Š -->
        <div class="text-center text-maintext text-sm">
            <button id="addToHomeBtn" class="text-maintext hover:underline">
                <i class="fas fa-plus-circle mr-1"></i> åŠ åˆ°æ‰‹æ©Ÿä¸»é 
            </button>
        </div>
        
        <!-- ç”¨æ–¼è¤‡è£½çš„éš±è—å…ƒç´  -->
        <textarea id="hiddenCopyArea" style="position: absolute; left: -9999px; top: 0;" readonly=""></textarea>
    </div>

    <!-- JavaScript -->
    <script>
        // ç‹€æ…‹è®Šæ•¸
        let formData = {
            errorCode: '',
            errorDensity: '',
            machineNumber: '',
            details: '',
            customerInfo: '',
            currentQuestion: 1, // è¿½è¹¤ç•¶å‰å•é¡Œ
            previousQuestion: null // è¿½è¹¤ä¸Šä¸€å€‹å•é¡Œ
        };

        // Error Code èªªæ˜
        const errorCodeDescriptions = {
            'E30': `è«‹å…ˆå˜—è©¦ä»¥ä¸‹\n\né»‘è‰²æµ·æ£‰ç²˜çµï¼š\nå¯å˜—è©¦ç”¨ä¸€å­—æ‰¹åˆ†é›¢å¸å¡µåˆ‡æ›éƒ¨ä»½çš„é»‘è‰²æµ·æ£‰ï¼Œå¤§æ©Ÿç‡èˆ‡ä¸Šæ–¹æ©Ÿä»¶ç²˜é€£ã€‚\n\nå¸å¡µåˆ‡æ›ç©ºé–“å…§ç©ç²‰å¤ªå¤šï¼š\nå˜—è©¦ä»¥ç¡¬æ¯›åˆ·æ¸…ç†æ©Ÿä»¶ï¼ŒåŠä»¥ä¹¾å¸ƒæ¸…ç†é»‘è‰²æµ·æ£‰ã€‚`,
            'E22': `è«‹å…ˆå˜—è©¦ä»¥ä¸‹\n\nå³è—¥æ ¼ç„¡æ³•é€²è¡Œå·¦å³å‹•ä½œï¼Œæˆ–Sensoråµæ¸¬ä¸åˆ°å³è—¥æ ¼åŸå§‹ä½ç½®ï¼š\næ‹†èµ°å³è—¥æ ¼ï¼Œå˜—è©¦åŒ…è£ç©ºè¢‹ï¼Œçœ‹çœ‹æœ‰æ²’æœ‰å†Errorã€‚å¦‚æ²’æœ‰å†Errorï¼Œå¯å˜—è©¦æ¸…ç†è—¥æ ¼ç©ç²‰ï¼Œæ•´ç†ç´éµï¼Œä»¥åŠæ¨é–‹è—¥è‡‚ä¸‹æ–¹ï¼Œæ¸…æ½”ç²‰å¡µã€‚`,
            'E23': `è«‹å…ˆå˜—è©¦ä»¥ä¸‹\n\nå³è—¥æ ¼ç„¡æ³•é€²è¡Œå·¦å³å‹•ä½œï¼Œæˆ–Sensoråµæ¸¬ä¸åˆ°å³è—¥æ¶ç§»å‹•ï¼š\næ‹†èµ°å³è—¥æ ¼ï¼Œå˜—è©¦ç©ºåŒ…15åŒ…ï¼ˆå¯ä»¥æ‹†åŒ…è£ç´™ï¼‰ï¼Œçœ‹çœ‹æœ‰æ²’æœ‰å†Errorã€‚å¦‚æ²’æœ‰å†Errorï¼Œå¯å˜—è©¦æ¸…ç†å³è—¥æ ¼ç©ç²‰ï¼Œæ•´ç†ç´éµï¼Œä»¥åŠæ¨é–‹å³è—¥è‡‚ä¸‹æ–¹ï¼Œæ¸…æ½”ç²‰å¡µã€‚`,
            'E20': `å»ºè­°ç¶­ä¿®\n\nåŸå› ï¼šå³è—¥æ ¼ç„¡æ³•é€²è¡Œå‰å¾Œå‹•ä½œï¼Œæˆ–è€…Sensoråµæ¸¬ä¸åˆ°å³è—¥æ ¼å‰æ–¹ä½ç½®`,
            'E21': `å»ºè­°ç¶­ä¿®\n\nåŸå› ï¼šå³è—¥æ ¼ç„¡æ³•é€²è¡Œå‰å¾Œå‹•ä½œï¼Œæˆ–è€…Sensoråµæ¸¬ä¸åˆ°å³è—¥æ ¼å¾Œæ–¹ä½ç½®`,
            'E24': `å»ºè­°ç¶­ä¿®\n\nåŸå› ï¼šå·¦è—¥æ ¼ç„¡æ³•é€²è¡Œå‰å¾Œå‹•ä½œï¼Œæˆ–è€…Sensoråµæ¸¬ä¸åˆ°å·¦è—¥æ ¼å‰ä½ç½®`,
            'E25': `å»ºè­°ç¶­ä¿®\n\nåŸå› ï¼šå·¦è—¥æ ¼ç„¡æ³•é€²è¡Œå‰å¾Œå‹•ä½œï¼Œæˆ–è€…Sensoråµæ¸¬ä¸åˆ°å·¦è—¥æ ¼å¾Œä½ç½®`,
            'E26': `è«‹å…ˆå˜—è©¦ä»¥ä¸‹\nå·¦è—¥æ ¼ç„¡æ³•é€²è¡Œå·¦å³å‹•ä½œï¼Œæˆ–è€…Sensoråµæ¸¬ä¸åˆ°å·¦è—¥æ ¼åŸå§‹ä½ç½®ï¼š\næ‹†èµ°å·¦è—¥æ ¼ï¼Œå˜—è©¦ç©ºåŒ…30åŒ…ï¼ˆå¯ä»¥æ‹†èµ°åŒ…è£ç´™ï¼‰ï¼Œçœ‹çœ‹æœ‰æ²’æœ‰å†Errorã€‚å¦‚æ²’æœ‰å†Errorï¼Œå¯å˜—è©¦æ¸…ç†å·¦è—¥æ ¼ç©ç²‰ï¼Œæ•´ç†ç´éµï¼Œä»¥åŠæ¨é–‹å·¦è—¥è‡‚ä¸‹æ–¹ï¼Œæ¸…æ½”ç²‰å¡µã€‚`,
            'E27': `è«‹å…ˆå˜—è©¦ä»¥ä¸‹\n\nå·¦è—¥æ ¼ç„¡æ³•é€²è¡Œå·¦å³å‹•ä½œï¼Œæˆ–è€…Sensoråµæ¸¬ä¸åˆ°å·¦è—¥æ ¼ç§»å‹•ï¼š\næ‹†èµ°å·¦è—¥æ ¼ï¼Œå˜—è©¦ç©ºåŒ…30åŒ…ï¼ˆå¯ä»¥æ‹†èµ°åŒ…è£ç´™ï¼‰ï¼Œçœ‹çœ‹æœ‰æ²’æœ‰å†Errorã€‚å¦‚æ²’æœ‰å†Errorï¼Œå¯å˜—è©¦æ¸…ç†å·¦è—¥æ ¼ç©ç²‰ï¼Œæ•´ç†ç´éµï¼Œä»¥åŠæ¨é–‹å·¦è—¥è‡‚ä¸‹æ–¹ï¼Œæ¸…æ½”ç²‰å¡µã€‚`,
            'E31': `è«‹å…ˆå˜—è©¦ä»¥ä¸‹\nå¸å¡µåˆ‡æ›ç©ºé–“å…§ç©ç²‰å¤ªå¤šï¼š\nå˜—è©¦ä»¥ç¡¬æ¯›åˆ·æ¸…ç†æ©Ÿä»¶ï¼ŒåŠä»¥ä¹¾å¸ƒæ¸…ç†é»‘è‰²æµ·æ£‰ã€‚`,
            'PE': `è«‹å…ˆå˜—è©¦ä»¥ä¸‹\næª¢æŸ¥åŒ…è£ç´™æœ‰æ²’æœ‰è£å¥½ï¼Œæ­£å¸¸è¹²ä¸‹æŸ¥çœ‹æ™‚æœƒçœ‹è¦‹åŒ…è£ç´™å·¦ä¸Š10é»é˜æ–¹å‘Sensorç‡ˆäº®ç´…ç‡ˆã€‚`,
            'E00': `å»ºè­°ç¶­ä¿®\n\nåŸå› ï¼šåŠ ç†±å™¨æ»¾ç­’éƒ¨ç™¼ç”Ÿäº†å¡ç´™æˆ–è€…æœ‰ç•°ç‰©æ²å…¥`,
            'E01': `å»ºè­°ç¶­ä¿®\n\nåŸå› ï¼šåŠ ç†±å™¨æ»¾ç®€ç„¡æ³•é€²è¡Œæ—‹è½‰ï¼Œæˆ–è€…å‚³æ„Ÿå™¨åµæ¸¬ä¸åˆ°æ»¾ç­’çš„åŸå§‹ä½ç½®`,
            'E18': `å»ºè­°ç¶­ä¿®\n\nåŸå› ï¼šåŠ ç†±å™¨æ»¾ç­’æº«åº¦ç•°å¸¸`,
            'E28': `å»ºè­°ç¶­ä¿®\n\nåŸå› ï¼šæ¨å‹•è—¥æ ¼çš„æ©Ÿä»¶ç„¡æ³•é€²è¡Œä¸Šæ¨æˆ–ä¸‹è½çš„å‹•ä½œï¼Œæˆ–è€…å‚³æ„Ÿå™¨åµæ¸¬ä¸åˆ°è©²æ©Ÿä»¶ä¸Šç¿»åŸå§‹ä½ç½®ã€é ‚é»`
        };

        // éš±è—æ‰€æœ‰å•é¡Œé é¢
        function hideAllQuestions() {
            const questionElements = [
                'question1', 'errorCodeSelection', 'errorCodeDetails',
                'noErrorCodeOptions', 'question2', 'question3', 'question4', 'question5'
            ];
            
            questionElements.forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
        }

        // é¡¯ç¤ºç‰¹å®šå•é¡Œé é¢
        function showQuestion(id) {
            hideAllQuestions();
            const element = document.getElementById(id);
            if (element) {
                element.classList.remove('hidden');
            }
        }
        
        // æ·»åŠ åˆ°ä¸»å±å¹•åŠŸèƒ½
        function addToHomeScreen() {
            // ä½¿ç”¨ beforeinstallprompt äº‹ä»¶ä¾†æ·»åŠ åˆ°ä¸»å±å¹•
            if (deferredPrompt) {
                // é¡¯ç¤ºå®‰è£æç¤º
                deferredPrompt.prompt();
                
                // ç­‰å¾…ç”¨æˆ¶åšå‡ºé¸æ“‡
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('ç”¨æˆ¶æ¥å—äº†å®‰è£åˆ°ä¸»å±å¹•');
                        // é¡¯ç¤ºæˆåŠŸé€šçŸ¥
                        const successNotice = document.getElementById('installSuccess');
                        successNotice.style.display = 'block';
                        setTimeout(() => {
                            successNotice.style.display = 'none';
                        }, 3000);
                    } else {
                        console.log('ç”¨æˆ¶æ‹’çµ•äº†å®‰è£åˆ°ä¸»å±å¹•');
                    }
                    deferredPrompt = null;
                });
            } else {
                // æª¢æ¸¬iOSè¨­å‚™
                const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
                if (isIOS) {
                    // ç‚ºiOSç”¨æˆ¶æä¾›åœ–å½¢åŒ–æŒ‡å°
                    showIOSInstallGuide();
                } else {
                    // å…¶ä»–å¹³å°ä½†ç„¡æ³•å®‰è£çš„æƒ…æ³
                    alert('æ­¤æ‡‰ç”¨å¯èƒ½å·²å®‰è£æˆ–æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æŒæ­¤åŠŸèƒ½ã€‚\n\nè«‹ä½¿ç”¨ç€è¦½å™¨çš„é¸å–®ï¼Œé¸æ“‡"æ·»åŠ åˆ°ä¸»å±å¹•"åŠŸèƒ½å°‡æ­¤æ‡‰ç”¨æ·»åŠ åˆ°æ‚¨çš„ä¸»é ã€‚');
                }
            }
        }
        
        // å°ˆç‚ºiOSè¨­å‚™é¡¯ç¤ºå®‰è£æŒ‡å—
        function showIOSInstallGuide() {
            // å‰µå»ºæ¨¡æ…‹å°è©±æ¡†
            const modal = document.createElement('div');
            modal.style.position = 'fixed';
            modal.style.top = '0';
            modal.style.left = '0';
            modal.style.right = '0';
            modal.style.bottom = '0';
            modal.style.backgroundColor = 'rgba(0,0,0,0.7)';
            modal.style.zIndex = '1000';
            modal.style.display = 'flex';
            modal.style.flexDirection = 'column';
            modal.style.alignItems = 'center';
            modal.style.justifyContent = 'center';
            
            // å‰µå»ºå…§å®¹å®¹å™¨
            const container = document.createElement('div');
            container.style.backgroundColor = 'white';
            container.style.padding = '20px';
            container.style.borderRadius = '10px';
            container.style.maxWidth = '90%';
            container.style.maxHeight = '80%';
            container.style.overflow = 'auto';
            container.style.textAlign = 'center';
            
            // æ·»åŠ æ¨™é¡Œ
            const title = document.createElement('h3');
            title.textContent = 'iOSæ·»åŠ åˆ°ä¸»å±å¹•æŒ‡å—';
            title.style.marginBottom = '15px';
            title.style.color = '#333';
            
            // æ·»åŠ æ­¥é©Ÿèªªæ˜
            const steps = document.createElement('div');
            steps.innerHTML = `
                <p style="margin-bottom:15px;text-align:left;color:#333;">1. é»æ“Šåº•éƒ¨çš„<strong>åˆ†äº«æŒ‰éˆ•</strong> <i class="fas fa-share-square" style="color:#007aff;"></i></p>
                <p style="margin-bottom:15px;text-align:left;color:#333;">2. åœ¨å½ˆå‡ºçš„é¸å–®ä¸­æ»‘å‹•ä¸¦å°‹æ‰¾<strong>æ·»åŠ åˆ°ä¸»å±å¹•</strong> <i class="fas fa-plus-square" style="color:#007aff;"></i> é¸é …</p>
                <p style="margin-bottom:15px;text-align:left;color:#333;">3. é»æ“Š<strong>æ·»åŠ åˆ°ä¸»å±å¹•</strong>ï¼Œç„¶å¾Œé»æ“Šå³ä¸Šè§’çš„<strong>æ·»åŠ </strong></p>
                <p style="margin-bottom:20px;text-align:left;color:#333;">4. å®Œæˆï¼ç¾åœ¨æ‚¨å¯ä»¥å¾ä¸»å±å¹•ç›´æ¥æ‰“é–‹æ­¤æ‡‰ç”¨</p>
            `;
            
            // æ·»åŠ é—œé–‰æŒ‰éˆ•
            const closeBtn = document.createElement('button');
            closeBtn.textContent = 'äº†è§£äº†';
            closeBtn.style.padding = '8px 15px';
            closeBtn.style.backgroundColor = '#007aff';
            closeBtn.style.color = 'white';
            closeBtn.style.border = 'none';
            closeBtn.style.borderRadius = '5px';
            closeBtn.style.cursor = 'pointer';
            closeBtn.style.marginTop = '10px';
            
            // çµ„åˆå…ƒç´ 
            container.appendChild(title);
            container.appendChild(steps);
            container.appendChild(closeBtn);
            modal.appendChild(container);
            
            // æ·»åŠ é—œé–‰åŠŸèƒ½
            closeBtn.addEventListener('click', function() {
                document.body.removeChild(modal);
            });
            
            // é¡¯ç¤ºæ¨¡æ…‹è¦–çª—
            document.body.appendChild(modal);
        }

        // ä¿å­˜å®‰è£æç¤º
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            // é˜»æ­¢ Chrome è‡ªå‹•é¡¯ç¤ºå®‰è£æç¤º
            e.preventDefault();
            // ä¿å­˜äº‹ä»¶ï¼Œä»¥ä¾¿ç¨å¾Œä½¿ç”¨
            deferredPrompt = e;
            
            // ç¢ºä¿æŒ‰éˆ•é¡¯ç¤º
            const installButton = document.getElementById('addToHomeBtn');
            if (installButton) {
                installButton.style.display = 'inline-flex';
            }
        });

        // DOM å…ƒç´ è¼‰å…¥å®Œæˆå¾ŒåŸ·è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            // æ·±è‰²æ¨¡å¼æ”¯æ´
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
            }
            
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
                if (event.matches) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            });

            // æ·»åŠ åˆ°ä¸»å±å¹•æŒ‰éˆ•é»æ“Šäº‹ä»¶
            document.getElementById('addToHomeBtn').addEventListener('click', addToHomeScreen);

            // åˆå§‹è¨­å®šäº‹ä»¶ç›£è½
            setupEventListeners();
        });

        // è¨­å®šæ‰€æœ‰äº‹ä»¶ç›£è½
        function setupEventListeners() {
            // å•é¡Œ1ï¼šError Code é¸æ“‡
            document.getElementById('btnErrorCode').addEventListener('click', function() {
                formData.previousQuestion = 'question1';
                formData.details = ''; // æ¸…ç©ºä¹‹å‰çš„ç´°ç¯€
                showQuestion('errorCodeSelection');
                updateFormResult();
            });

            document.getElementById('btnNoErrorCode').addEventListener('click', function() {
                formData.previousQuestion = 'question1';
                formData.errorCode = 'æ²’æœ‰Error Code';
                formData.details = '';
                showQuestion('noErrorCodeOptions');
                updateFormResult();
            });

            // è¿”å›å•é¡Œ1
            document.getElementById('btnBackToQuestion1').addEventListener('click', function() {
                formData.errorCode = '';
                showQuestion('question1');
                updateFormResult();
            });
            
            document.getElementById('btnBackToQuestion1FromNoError').addEventListener('click', function() {
                formData.errorCode = '';
                formData.details = '';
                showQuestion('question1');
                updateFormResult();
            });

            // Error Code æŒ‰éˆ•é»æ“Šäº‹ä»¶
            document.querySelectorAll('.error-code-btn').forEach(function(btn) {
                btn.addEventListener('click', function() {
                    const code = this.dataset.code;
                    formData.errorCode = code;
                    formData.previousQuestion = 'errorCodeSelection';
                    document.getElementById('selectedErrorCodeTitle').textContent = `Error Code: ${code}`;
                    document.getElementById('errorCodeDescription').textContent = errorCodeDescriptions[code] || '';
                    showQuestion('errorCodeDetails');
                    updateFormResult();
                });
            });
            
            // è¿”å›åˆ°Error Codeé¸æ“‡
            document.getElementById('btnBackToErrorSelection').addEventListener('click', function() {
                showQuestion('errorCodeSelection');
            });

            // ç„¡éŒ¯èª¤ç¢¼çš„é¸é …é»æ“Š
            document.querySelectorAll('.underlined-option').forEach(function(option) {
                option.addEventListener('click', function() {
                    const detail = this.dataset.detail;
                    const currentDetails = document.getElementById('noErrorDetails').value;
                    
                    // æª¢æŸ¥æ˜¯å¦å·²ç¶“æ·»åŠ éç›¸åŒçš„è©³ç´°ä¿¡æ¯
                    if (!currentDetails.includes(detail)) {
                        if (currentDetails) {
                            document.getElementById('noErrorDetails').value = currentDetails + ', ' + detail;
                        } else {
                            document.getElementById('noErrorDetails').value = detail;
                        }
                        formData.details = document.getElementById('noErrorDetails').value;
                        updateFormResult();
                    }
                });
            });

            // ç„¡éŒ¯èª¤ç¢¼æ–‡å­—å€åŸŸè®ŠåŒ–
            document.getElementById('noErrorDetails').addEventListener('input', function() {
                formData.details = this.value;
                updateFormResult();
            });

            // å®‰æ’ç¶­ä¿®æŒ‰éˆ•é»æ“Šäº‹ä»¶
            document.getElementById('btnScheduleRepair').addEventListener('click', function() {
                formData.previousQuestion = 'errorCodeDetails';
                showQuestion('question2');
            });

            document.getElementById('btnNoErrorScheduleRepair').addEventListener('click', function() {
                if (!formData.details.trim()) {
                    alert('è«‹æä¾›å•é¡Œè©³æƒ…');
                    return;
                }
                formData.previousQuestion = 'noErrorCodeOptions';
                showQuestion('question3');
            });
            
            // è¿”å›åˆ°Error Details
            document.getElementById('btnBackToErrorDetails').addEventListener('click', function() {
                showQuestion('errorCodeDetails');
            });

            // å•é¡Œ2ï¼šError Code å¯†åº¦
            document.querySelectorAll('.error-density-btn').forEach(function(btn) {
                btn.addEventListener('click', function() {
                    const density = this.dataset.density;
                    formData.errorDensity = density;
                    formData.previousQuestion = 'question2';
                    updateFormResult();
                    showQuestion('question3');
                });
            });

            // å•é¡Œ3ï¼šæ©Ÿèº«ç·¨è™Ÿ
            document.getElementById('machineNumber').addEventListener('input', function() {
                formData.machineNumber = this.value;
                updateFormResult();
            });
            
            document.getElementById('btnBackToPreviousQ').addEventListener('click', function() {
                // æª¢æŸ¥ä¸Šä¸€å€‹å•é¡Œæ˜¯ä»€éº¼ï¼Œç„¶å¾Œè¿”å›
                if (formData.errorCode && formData.errorCode !== 'æ²’æœ‰Error Code') {
                    showQuestion('question2'); // è¿”å›åˆ°å¯†åº¦
                } else {
                    showQuestion('noErrorCodeOptions'); // è¿”å›åˆ°ç„¡Error Code
                }
            });
            
            document.getElementById('btnContinue3').addEventListener('click', function() {
                if (formData.machineNumber.trim() === '') {
                    alert('è«‹è¼¸å…¥æ©Ÿèº«ç·¨è™Ÿ');
                    return;
                }
                formData.previousQuestion = 'question3';
                showQuestion('question4');
            });

            // å•é¡Œ4ï¼šå®¢æˆ¶ç·¨è™Ÿæˆ–è¨ºæ‰€åç¨±
            document.getElementById('customerInfo').addEventListener('input', function() {
                formData.customerInfo = this.value;
                updateFormResult();
            });
            
            document.getElementById('btnBackToQuestion3').addEventListener('click', function() {
                showQuestion('question3');
            });
            
            document.getElementById('btnContinue4').addEventListener('click', function() {
                if (formData.customerInfo.trim() === '') {
                    alert('è«‹è¼¸å…¥å®¢æˆ¶ç·¨è™Ÿæˆ–è¨ºæ‰€åç¨±');
                    return;
                }
                formData.previousQuestion = 'question4';
                showQuestion('question5');
            });
            
            // è¿”å›åˆ°å•é¡Œ4
            document.getElementById('btnBackToQuestion4').addEventListener('click', function() {
                showQuestion('question4');
            });

            // å•é¡Œ5ï¼šæ“ä½œé¸æ“‡
            document.getElementById('btnSendWhatsApp').addEventListener('click', function() {
                sendToWhatsApp();
            });

            // ä¿®æ”¹ - ä½¿ç”¨æ›´å…¼å®¹çš„è¤‡è£½æ–¹æ³•
            document.getElementById('btnCopyOnly').addEventListener('click', function() {
                copyToClipboardCompatible();
            });
        }

        // æ›´æ–°è¡¨å–®çµæœ
        function updateFormResult() {
            document.getElementById('resultErrorCode').textContent = `Error Codeï¼š${formData.errorCode || ''}`;
            document.getElementById('resultErrorDensity').textContent = `Error Codeå¯†åº¦ï¼š${formData.errorDensity || ''}`;
            document.getElementById('resultMachineNumber').textContent = `æ©Ÿèº«ç·¨è™Ÿï¼š${formData.machineNumber || ''}`;
            document.getElementById('resultDetails').textContent = `å…¶ä»–ç´°ç¯€ï¼š${formData.details || ''}`;
            document.getElementById('resultCustomerInfo').textContent = `å®¢æˆ¶ç·¨è™Ÿ/è¨ºæ‰€åç¨±ï¼š${formData.customerInfo || ''}`;
        }

        // ç™¼é€åˆ°WhatsApp
        function sendToWhatsApp() {
            // å‰µå»ºè³‡æ–™æ–‡æœ¬
            const text = formatFormData();
            
            // ä½¿ç”¨WhatsApp Web API
            const whatsappURL = `https://wa.me/85252923655?text=${encodeURIComponent(text)}`;
            window.open(whatsappURL, '_blank');
        }

        // æ–°çš„è¤‡è£½æ–¹æ³•ï¼Œä½¿ç”¨document.execCommand('copy')
        function copyToClipboardCompatible() {
            const text = formatFormData();
            
            try {
                // ä½¿ç”¨éš±è—çš„textareaå…ƒç´ 
                const hiddenTextarea = document.getElementById('hiddenCopyArea');
                hiddenTextarea.value = text;
                hiddenTextarea.focus();
                hiddenTextarea.select();
                
                // åŸ·è¡Œè¤‡è£½å‘½ä»¤
                const successful = document.execCommand('copy');
                if (successful) {
                    alert('è³‡æ–™å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿');
                } else {
                    alert('è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•è¤‡è£½ä»¥ä¸‹æ–‡å­—:\n\n' + text);
                }
            } catch (err) {
                alert('è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•è¤‡è£½ä»¥ä¸‹æ–‡å­—:\n\n' + text);
                console.error('è¤‡è£½å¤±æ•—:', err);
            }
        }

        // æ ¼å¼åŒ–è¡¨å–®è³‡æ–™
        function formatFormData() {
            return `æ—¥æœ¬åŒ…è£æ©Ÿç¶­ä¿®å›å ±å–®\n\nError Codeï¼š${formData.errorCode || ''}\nError Codeå¯†åº¦ï¼š${formData.errorDensity || ''}\næ©Ÿèº«ç·¨è™Ÿï¼š${formData.machineNumber || ''}\nå®¢æˆ¶ç·¨è™Ÿ/è¨ºæ‰€åç¨±ï¼š${formData.customerInfo || ''}\nå…¶ä»–ç´°ç¯€ï¼š${formData.details || ''}`;
        }
    </script>


</body></html>